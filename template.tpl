___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Lucky Orange Tracking Code",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Automatically places your Lucky Orange tracking code within your website.\n\nHeads up! This template only works with the new version of Lucky Orange and not Lucky Orange Classic.",
  "categories": [
    "ANALYTICS",
    "SESSION_RECORDING",
    "HEAT_MAP",
    "SURVEY",
    "CONVERSIONS",
    "CHAT"
  ],
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "siteId",
    "displayName": "Lucky Orange Site ID",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Require necessary scripts
const injectScript = require('injectScript');
const encodeUriComponent = require('encodeUriComponent');

// Inject our tracking code
injectScript('https://tools.luckyorange.com/core/lo.js?site-id=' + encodeUriComponent(data.siteId), data.gtmOnSuccess, data.gtmOnFailure);

// Call data.gtmOnSuccess when the tag is finished.
function onSuccess () {
  data.gtmOnSuccess();
}

function onFailure () {
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://tools.luckyorange.com/core/lo.js*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Should load tracking code with correct site ID
  code: |-
    const mockData = {
      siteId: 'test-site-id'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


___NOTES___

Created on 11/9/2021, 2:38:01 PM


